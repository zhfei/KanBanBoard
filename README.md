# Kanban Board - çœ‹æ¿ä»»åŠ¡ç®¡ç†ç³»ç»Ÿ

ä¸€ä¸ªåŸºäº React + Node.js çš„ç°ä»£åŒ–çœ‹æ¿ä»»åŠ¡ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒç±»ä¼¼ Trello çš„ä»»åŠ¡æ‹–æ‹½æ“ä½œã€‚é€šè¿‡ Docker Compose å®ç°ä¸€é”®éƒ¨ç½²ï¼Œå‰åç«¯å®Œå…¨å®¹å™¨åŒ–ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- ğŸ“‹ **ä»»åŠ¡ç®¡ç†**ï¼šå®Œæ•´çš„ä»»åŠ¡ CRUD æ“ä½œï¼ˆåˆ›å»ºã€æŸ¥çœ‹ã€ç¼–è¾‘ã€åˆ é™¤ï¼‰
- ğŸ¯ **æ‹–æ‹½æµè½¬**ï¼šæ”¯æŒä»»åŠ¡åœ¨ Todoã€Doingã€Done ä¸‰åˆ—ä¹‹é—´è‡ªç”±æ‹–æ‹½
- ğŸ”„ **å®æ—¶åŒæ­¥**ï¼šæ‹–æ‹½æ“ä½œç«‹å³åŒæ­¥åˆ°åç«¯æ•°æ®åº“ï¼Œæ•°æ®æŒä¹…åŒ–
- ğŸ¨ **ç°ä»£åŒ– UI**ï¼šåŸºäº React + Radix UI çš„ç¾è§‚ç•Œé¢è®¾è®¡
- ğŸ³ **å®¹å™¨åŒ–éƒ¨ç½²**ï¼šDocker Compose ä¸€é”®å¯åŠ¨æ‰€æœ‰æœåŠ¡
- ğŸ“± **å“åº”å¼è®¾è®¡**ï¼šé€‚é…ä¸åŒå±å¹•å°ºå¯¸

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| React | ^18.3.1 | UI æ¡†æ¶ |
| TypeScript | - | ç±»å‹å®‰å…¨ |
| Vite | 6.3.5 | æ„å»ºå·¥å…· |
| React DnD | - | æ‹–æ‹½åŠŸèƒ½ |
| Radix UI | - | UI ç»„ä»¶åº“ |
| Tailwind CSS | - | æ ·å¼æ¡†æ¶ |

### åç«¯

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| Node.js | 20 | è¿è¡Œæ—¶ç¯å¢ƒ |
| Express | ^4.21.1 | Web æ¡†æ¶ |
| TypeScript | ^5.5.4 | ç±»å‹å®‰å…¨ |
| Prisma | ^5.19.1 | ORM æ¡†æ¶ |
| PostgreSQL | 16 | å…³ç³»å‹æ•°æ®åº“ |
| Zod | ^3.23.8 | å‚æ•°æ ¡éªŒ |

### éƒ¨ç½²

| æŠ€æœ¯ | ç”¨é€” |
|------|------|
| Docker | å®¹å™¨åŒ– |
| Docker Compose | æœåŠ¡ç¼–æ’ |
| Nginx | å‰ç«¯é™æ€èµ„æºæœåŠ¡ |

## ğŸ“ é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ frontend/              # å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/          # API å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ components/   # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ pages/        # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ state/        # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ utils/        # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ Dockerfile        # å‰ç«¯ Docker é…ç½®
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ backend/              # åç«¯ API
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ controllers/  # æ§åˆ¶å™¨å±‚
â”‚   â”‚   â”œâ”€â”€ services/     # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”‚   â”œâ”€â”€ repositories/ # æ•°æ®è®¿é—®å±‚
â”‚   â”‚   â”œâ”€â”€ routes/       # è·¯ç”±å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ validators/   # å‚æ•°æ ¡éªŒ
â”‚   â”‚   â”œâ”€â”€ middlewares/  # ä¸­é—´ä»¶
â”‚   â”‚   â””â”€â”€ config/       # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ migrations/       # æ•°æ®åº“è¿ç§»è„šæœ¬
â”‚   â”œâ”€â”€ prisma/           # Prisma schema
â”‚   â”œâ”€â”€ Dockerfile        # åç«¯ Docker é…ç½®
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ docker-compose.yml    # Docker Compose é…ç½®
â”œâ”€â”€ APIæ¥å£æ–‡æ¡£.md        # API æ¥å£æ–‡æ¡£
â””â”€â”€ å¯åŠ¨è¯´æ˜.md           # è¯¦ç»†å¯åŠ¨è¯´æ˜

```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- [Docker](https://www.docker.com/get-started) (>= 20.10)
- [Docker Compose](https://docs.docker.com/compose/install/) (>= 2.0)

> **æ³¨æ„**ï¼šç¡®ä¿ Docker å’Œ Docker Compose å·²æ­£ç¡®å®‰è£…å¹¶è¿è¡Œã€‚

### ä¸€é”®å¯åŠ¨

1. **å…‹éš†é¡¹ç›®**

```bash
git clone https://github.com/zhfei/KanBanBoard.git
cd KanBanBoard
```

2. **å¯åŠ¨æ‰€æœ‰æœåŠ¡**

```bash
docker compose up
```

3. **è®¿é—®åº”ç”¨**

- å‰ç«¯ç•Œé¢ï¼šhttp://localhost:3000
- åç«¯ APIï¼šhttp://localhost:8080
- æ•°æ®åº“ï¼šlocalhost:5432

### éªŒè¯å¯åŠ¨æˆåŠŸ

1. **æ£€æŸ¥æœåŠ¡çŠ¶æ€**

```bash
docker compose ps
```

åº”è¯¥çœ‹åˆ°ä»¥ä¸‹æœåŠ¡éƒ½åœ¨è¿è¡Œï¼š
- `kanban-db` (PostgreSQL æ•°æ®åº“)
- `kanban-backend` (åç«¯ API)
- `kanban-frontend` (å‰ç«¯æœåŠ¡)

> **æ³¨æ„**ï¼š`kanban-migrate` æœåŠ¡æ‰§è¡Œå®Œæ•°æ®åº“è¿ç§»åä¼šè‡ªåŠ¨é€€å‡ºï¼Œè¿™æ˜¯æ­£å¸¸çš„ã€‚

2. **æŸ¥çœ‹æ—¥å¿—**

```bash
# æŸ¥çœ‹æ‰€æœ‰æœåŠ¡æ—¥å¿—
docker compose logs -f

# æŸ¥çœ‹ç‰¹å®šæœåŠ¡æ—¥å¿—
docker compose logs -f backend
docker compose logs -f frontend
```

3. **æµ‹è¯• API**

```bash
# å¥åº·æ£€æŸ¥
curl http://localhost:8080/health

# è·å–ä»»åŠ¡åˆ—è¡¨
curl http://localhost:8080/api/tasks
```

### åœæ­¢æœåŠ¡

```bash
# åœæ­¢æ‰€æœ‰æœåŠ¡ï¼ˆä¿ç•™æ•°æ®ï¼‰
docker compose stop

# åœæ­¢å¹¶åˆ é™¤å®¹å™¨ï¼ˆä¿ç•™æ•°æ®å·ï¼‰
docker compose down

# åœæ­¢å¹¶åˆ é™¤å®¹å™¨å’Œæ•°æ®å·ï¼ˆå®Œå…¨æ¸…ç†ï¼‰
docker compose down -v
```

## ğŸ“– è¯¦ç»†å¯åŠ¨è¯´æ˜

### æœåŠ¡å¯åŠ¨é¡ºåº

Docker Compose ä¼šæŒ‰ä»¥ä¸‹é¡ºåºè‡ªåŠ¨å¯åŠ¨æœåŠ¡ï¼š

1. **kanban-db** - PostgreSQL æ•°æ®åº“æœåŠ¡
   - ç­‰å¾…æ•°æ®åº“å¥åº·æ£€æŸ¥é€šè¿‡
   - ç«¯å£ï¼š5432

2. **kanban-migrate** - æ•°æ®åº“è¿ç§»æœåŠ¡
   - ç­‰å¾…æ•°æ®åº“å°±ç»ªåæ‰§è¡Œè¿ç§»è„šæœ¬
   - æ‰§è¡Œå®Œæˆåè‡ªåŠ¨é€€å‡ºï¼ˆ`restart: "no"`ï¼‰
   - è¿ç§»è„šæœ¬ï¼š`backend/migrations/init.sql`

3. **kanban-backend** - åç«¯ API æœåŠ¡
   - ç­‰å¾…è¿ç§»æœåŠ¡æˆåŠŸå®Œæˆåå¯åŠ¨
   - æä¾› REST API æ¥å£
   - ç«¯å£ï¼š8080

4. **kanban-frontend** - å‰ç«¯ Web æœåŠ¡
   - ç­‰å¾…åç«¯æœåŠ¡å¯åŠ¨åå¯åŠ¨
   - æä¾› Web ç•Œé¢
   - ç«¯å£ï¼š3000 (æ˜ å°„åˆ°å®¹å™¨å†…çš„ 80)

### ç«¯å£æ˜ å°„

| æœåŠ¡ | å®¹å™¨ç«¯å£ | ä¸»æœºç«¯å£ | è¯´æ˜ |
|------|---------|---------|------|
| å‰ç«¯ | 80 | 3000 | Web ç•Œé¢ |
| åç«¯ | 8080 | 8080 | API æ¥å£ |
| æ•°æ®åº“ | 5432 | 5432 | PostgreSQL |

### ç¯å¢ƒå˜é‡

ä¸»è¦ç¯å¢ƒå˜é‡é…ç½®ï¼ˆåœ¨ `docker-compose.yml` ä¸­ï¼‰ï¼š

**åç«¯ç¯å¢ƒå˜é‡ï¼š**
- `PORT`: 8080
- `DB_HOST`: db
- `DB_PORT`: 5432
- `DB_USER`: kanban
- `DB_PASSWORD`: kanban
- `DB_NAME`: kanban
- `CORS_ORIGIN`: http://localhost:3000

**å‰ç«¯ç¯å¢ƒå˜é‡ï¼š**
- `VITE_API_BASE_URL`: http://localhost:8080

### å¸¸è§é—®é¢˜

#### 1. Docker é•œåƒæ‹‰å–è¶…æ—¶

**é—®é¢˜**ï¼šé‡åˆ° `failed to resolve reference` æˆ– `context deadline exceeded` é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š

é…ç½® Docker é•œåƒåŠ é€Ÿå™¨ï¼š

**macOS / Windows (Docker Desktop):**
1. æ‰“å¼€ Docker Desktop
2. è¿›å…¥ Settings â†’ Docker Engine
3. æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š

```json
{
  "registry-mirrors": [
    "https://docker.mirrors.ustc.edu.cn",
    "https://hub-mirror.c.163.com",
    "https://mirror.baidubce.com"
  ]
}
```

4. ç‚¹å‡» "Apply & Restart"

#### 2. ç«¯å£å·²è¢«å ç”¨

**é—®é¢˜**ï¼šç«¯å£ 3000ã€8080 æˆ– 5432 å·²è¢«å ç”¨

**è§£å†³æ–¹æ¡ˆ**ï¼š

```bash
# æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
# macOS/Linux
lsof -i :3000
lsof -i :8080
lsof -i :5432

# Windows
netstat -ano | findstr :3000
```

ä¿®æ”¹ `docker-compose.yml` ä¸­çš„ç«¯å£æ˜ å°„ï¼Œæˆ–åœæ­¢å ç”¨ç«¯å£çš„æœåŠ¡ã€‚

#### 3. è¿ç§»æœåŠ¡å¤±è´¥

**é—®é¢˜**ï¼š`kanban-migrate` æœåŠ¡æ‰§è¡Œå¤±è´¥

**è§£å†³æ–¹æ¡ˆ**ï¼š

```bash
# æŸ¥çœ‹è¿ç§»æ—¥å¿—
docker compose logs migrate

# æ‰‹åŠ¨æ‰§è¡Œè¿ç§»ï¼ˆå¦‚æœéœ€è¦ï¼‰
docker compose exec db psql -U kanban -d kanban -f /migrations/init.sql
```

æ›´å¤šè¯¦ç»†çš„é—®é¢˜æ’æŸ¥ï¼Œè¯·å‚è€ƒ [å¯åŠ¨è¯´æ˜.md](å¯åŠ¨è¯´æ˜.md)ã€‚

## ğŸ’¡ ä½¿ç”¨è¯´æ˜

### åŸºæœ¬æ“ä½œ

1. **åˆ›å»ºä»»åŠ¡**
   - ç‚¹å‡»å³ä¸Šè§’çš„"æ–°å»ºä»»åŠ¡"æŒ‰é’®
   - å¡«å†™ä»»åŠ¡æ ‡é¢˜ï¼ˆå¿…å¡«ï¼‰å’Œæè¿°ï¼ˆå¯é€‰ï¼‰
   - ç‚¹å‡»"ä¿å­˜"ï¼Œä»»åŠ¡ä¼šè‡ªåŠ¨æ·»åŠ åˆ° Todo åˆ—

2. **æŸ¥çœ‹ä»»åŠ¡è¯¦æƒ…**
   - ç‚¹å‡»ä»»åŠ¡å¡ç‰‡æŸ¥çœ‹è¯¦æƒ…
   - åœ¨å¼¹çª—ä¸­å¯ä»¥æŸ¥çœ‹å®Œæ•´çš„ä»»åŠ¡ä¿¡æ¯

3. **ç¼–è¾‘ä»»åŠ¡**
   - ç‚¹å‡»ä»»åŠ¡å¡ç‰‡æ‰“å¼€è¯¦æƒ…å¼¹çª—
   - ä¿®æ”¹æ ‡é¢˜ã€æè¿°æˆ–çŠ¶æ€
   - ç‚¹å‡»"ä¿å­˜"ä¿å­˜æ›´æ”¹

4. **æ‹–æ‹½ä»»åŠ¡**
   - æŒ‰ä½ä»»åŠ¡å¡ç‰‡
   - æ‹–æ‹½åˆ°ç›®æ ‡åˆ—ï¼ˆTodo/Doing/Doneï¼‰
   - é‡Šæ”¾é¼ æ ‡ï¼Œä»»åŠ¡ä¼šè‡ªåŠ¨ä¿å­˜åˆ°æ–°çŠ¶æ€

5. **åˆ é™¤ä»»åŠ¡**
   - åœ¨ä»»åŠ¡è¯¦æƒ…å¼¹çª—ä¸­ç‚¹å‡»"åˆ é™¤"æŒ‰é’®
   - ç¡®è®¤åˆ é™¤æ“ä½œ

## ğŸ“š API æ–‡æ¡£

å®Œæ•´çš„ API æ¥å£æ–‡æ¡£è¯·å‚è€ƒï¼š[APIæ¥å£æ–‡æ¡£.md](APIæ¥å£æ–‡æ¡£.md)

### ä¸»è¦æ¥å£

- `GET /health` - å¥åº·æ£€æŸ¥
- `GET /api/tasks` - è·å–ä»»åŠ¡åˆ—è¡¨ï¼ˆæ”¯æŒæŒ‰çŠ¶æ€è¿‡æ»¤ï¼‰
- `GET /api/tasks/:id` - è·å–å•ä¸ªä»»åŠ¡
- `POST /api/tasks` - åˆ›å»ºä»»åŠ¡
- `PUT /api/tasks/:id` - æ›´æ–°ä»»åŠ¡
- `DELETE /api/tasks/:id` - åˆ é™¤ä»»åŠ¡

### ç»Ÿä¸€å“åº”æ ¼å¼

```json
{
  "code": 0,        // 0 è¡¨ç¤ºæˆåŠŸï¼Œå…¶ä»–å€¼è¡¨ç¤ºå¤±è´¥
  "message": "ok",
  "data": {}        // å“åº”æ•°æ®
}
```

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### æœ¬åœ°å¼€å‘ç¯å¢ƒè®¾ç½®

#### å‰ç«¯å¼€å‘

```bash
cd frontend
npm install
npm run dev
```

å‰ç«¯å¼€å‘æœåŠ¡å™¨å°†åœ¨ http://localhost:5173 å¯åŠ¨ã€‚

#### åç«¯å¼€å‘

1. **å®‰è£…ä¾èµ–**

```bash
cd backend
npm install
```

2. **é…ç½®ç¯å¢ƒå˜é‡**

åˆ›å»º `.env` æ–‡ä»¶ï¼š

```env
PORT=8080
NODE_ENV=development
DB_HOST=localhost
DB_PORT=5432
DB_USER=kanban
DB_PASSWORD=kanban
DB_NAME=kanban
DATABASE_URL=postgresql://kanban:kanban@localhost:5432/kanban?schema=public
CORS_ORIGIN=http://localhost:5173
```

3. **å¯åŠ¨æ•°æ®åº“**

```bash
# ä½¿ç”¨ Docker å¯åŠ¨æ•°æ®åº“
docker run -d \
  --name kanban-db \
  -e POSTGRES_DB=kanban \
  -e POSTGRES_USER=kanban \
  -e POSTGRES_PASSWORD=kanban \
  -p 5432:5432 \
  postgres:16-alpine
```

4. **æ‰§è¡Œæ•°æ®åº“è¿ç§»**

```bash
# è¿è¡Œè¿ç§»è„šæœ¬
docker exec -i kanban-db psql -U kanban -d kanban < backend/migrations/init.sql
```

æˆ–è€…ä½¿ç”¨ Prismaï¼š

```bash
npx prisma generate
npx prisma migrate dev
```

5. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**

```bash
npm run dev
```

åç«¯ API å°†åœ¨ http://localhost:8080 å¯åŠ¨ã€‚

### ä»£ç ç»“æ„è¯´æ˜

#### åç«¯æ¶æ„

é‡‡ç”¨åˆ†å±‚æ¶æ„è®¾è®¡ï¼š

- **Controller å±‚**ï¼šå¤„ç† HTTP è¯·æ±‚å’Œå“åº”
- **Service å±‚**ï¼šä¸šåŠ¡é€»è¾‘å¤„ç†
- **Repository å±‚**ï¼šæ•°æ®è®¿é—®æ“ä½œ
- **Middleware**ï¼šè¯·æ±‚æ—¥å¿—ã€é”™è¯¯å¤„ç†ã€å‚æ•°æ ¡éªŒ

#### å‰ç«¯æ¶æ„

- **Components**ï¼šå¯å¤ç”¨çš„ UI ç»„ä»¶
- **Pages**ï¼šé¡µé¢ç»„ä»¶
- **State**ï¼šä½¿ç”¨ React Context + Reducer è¿›è¡ŒçŠ¶æ€ç®¡ç†
- **API**ï¼šç»Ÿä¸€çš„ API å®¢æˆ·ç«¯å°è£…

### ä»£ç è§„èŒƒ

- TypeScript ä¸¥æ ¼æ¨¡å¼
- ESLint + Prettierï¼ˆå»ºè®®ï¼‰
- éµå¾ª RESTful API è®¾è®¡è§„èŒƒ
- ç»Ÿä¸€é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•

## ğŸ“ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ ISC è®¸å¯è¯ã€‚

## ğŸ”— ç›¸å…³é“¾æ¥

- [é¡¹ç›®ä»“åº“](https://github.com/zhfei/KanBanBoard)
- [è¯¦ç»†å¯åŠ¨è¯´æ˜](å¯åŠ¨è¯´æ˜.md)
- [API æ¥å£æ–‡æ¡£](APIæ¥å£æ–‡æ¡£.md)
- [æŠ€æœ¯æ–‡æ¡£](æŠ€æœ¯æ–‡æ¡£/)

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

---

**æ³¨æ„**ï¼šæœ¬ README æè¿°äº†é¡¹ç›®çš„ä½¿ç”¨å’Œå¼€å‘æ–¹æ³•ã€‚å¦‚æœæ‚¨æ˜¯ä½œä¸ºè€ƒæ ¸é¡¹ç›®æŸ¥çœ‹ï¼ŒåŸå§‹è€ƒæ ¸è¦æ±‚è¯·å‚è€ƒé¡¹ç›®å†å²æäº¤è®°å½•ã€‚
